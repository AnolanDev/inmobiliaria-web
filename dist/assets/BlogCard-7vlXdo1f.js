import{y as U,r as v,i as _,d as I,c as g,o as n,f as C,a,h as D,n as F,g as M,H as N,I as Q,l as E,J as k,t as y,F as R,p as j,x as W,q as X,R as Y,j as P,e as V}from"./index-BlUmu2Vm.js";import{a as $}from"./api-uPx9hDD2.js";import{_ as A}from"./AppLayout-DF0ZzwtV.js";import{R as Z}from"./ResponsiveImage-rKKQ3KlU.js";const tt=U("blogs",()=>{const m=v([]),i=v(null),b=v([]),u=v([]),o=v([]),s=v(!1),l=v(null),d=v({}),x=v({currentPage:1,lastPage:1,perPage:6,total:0}),e=v({}),c=v({}),z=5*60*1e3,L=_(()=>m.value.filter(t=>t.status==="published")),K=_(()=>t=>L.value.filter(r=>r.category===t)),G=_(()=>t=>L.value.filter(r=>r.tags.includes(t))),J=_(()=>L.value.slice().sort((t,r)=>new Date(r.published_at).getTime()-new Date(t.published_at).getTime()).slice(0,6)),O=_(()=>L.value.slice().sort((t,r)=>(r.views_count||0)-(t.views_count||0)).slice(0,6)),T=(t,r)=>JSON.stringify({filters:t,page:r}),H=t=>{const r=c.value[t];return r&&Date.now()-r<z};return{blogs:m,currentBlog:i,featuredBlogs:b,categories:u,tags:o,isLoading:s,error:l,filters:d,pagination:x,publishedBlogs:L,blogsByCategory:K,blogsByTag:G,recentBlogs:J,popularBlogs:O,fetchBlogs:async(t,r=1)=>{var p,f;try{s.value=!0,l.value=null,t&&(d.value={...d.value,...t});const w={...d.value},h=T(w,r);if(H(h)&&e.value[h]){const S=e.value[h];m.value=S.data,x.value=S.pagination,s.value=!1;return}const B=await $.getBlogs({...w,page:r,with:"media,image,featured_image",include:"featured_image,gallery,media,image",fields:"*"});m.value=B.data,B.meta&&(x.value={currentPage:B.meta.current_page,lastPage:B.meta.last_page,perPage:B.meta.per_page,total:B.meta.total}),e.value[h]={data:B.data,pagination:x.value},c.value[h]=Date.now()}catch(w){l.value=((f=(p=w.response)==null?void 0:p.data)==null?void 0:f.message)||"Error al cargar los blogs",console.error("Error fetching blogs:",w)}finally{s.value=!1}},loadMoreBlogs:async t=>{var r,p;try{s.value=!0,l.value=null;const f={...d.value},w=T(f,t);if(H(w)&&e.value[w]){const B=e.value[w];m.value=[...m.value,...B.data],x.value=B.pagination,s.value=!1;return}const h=await $.getBlogs({...f,page:t,with:"media,image,featured_image",include:"featured_image,gallery,media,image",fields:"*"});m.value=[...m.value,...h.data],h.meta&&(x.value={currentPage:h.meta.current_page,lastPage:h.meta.last_page,perPage:h.meta.per_page,total:h.meta.total}),e.value[w]={data:h.data,pagination:x.value},c.value[w]=Date.now()}catch(f){l.value=((p=(r=f.response)==null?void 0:r.data)==null?void 0:p.message)||"Error al cargar mÃ¡s blogs",console.error("Error loading more blogs:",f)}finally{s.value=!1}},fetchBlog:async t=>{var r,p;try{s.value=!0,l.value=null;const f=await $.getBlog(t);return i.value=f,f}catch(f){throw l.value=((p=(r=f.response)==null?void 0:r.data)==null?void 0:p.message)||"Error al cargar el blog",console.error("Error fetching blog:",f),f}finally{s.value=!1}},fetchFeaturedBlogs:async()=>{var t,r;try{s.value=!0,l.value=null;const p=await $.getFeaturedBlogs();return b.value=p,p}catch(p){l.value=((r=(t=p.response)==null?void 0:t.data)==null?void 0:r.message)||"Error al cargar blogs destacados",console.error("Error fetching featured blogs:",p)}finally{s.value=!1}},fetchBlogCategories:async()=>{try{const t=await $.getBlogCategories();return u.value=t,t}catch(t){console.error("Error fetching blog categories:",t)}},fetchBlogTags:async()=>{try{const t=await $.getBlogTags();return o.value=t,t}catch(t){console.error("Error fetching blog tags:",t)}},setFilters:t=>{d.value={...d.value,...t}},clearFilters:()=>{d.value={}},clearError:()=>{l.value=null},clearCurrentBlog:()=>{i.value=null},searchBlogs:t=>L.value.filter(r=>r.title.toLowerCase().includes(t.toLowerCase())||r.excerpt.toLowerCase().includes(t.toLowerCase())||r.content.toLowerCase().includes(t.toLowerCase())||r.tags.some(p=>p.toLowerCase().includes(t.toLowerCase())))}}),q={key:0,class:"px-6 py-4 border-b border-gray-200"},ee={key:1,class:"relative"},te={key:2,class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},ae=I({__name:"BaseCard",props:{hover:{type:Boolean,default:!0},padding:{default:"md"},shadow:{default:"sm"}},setup(m){const i=m,b=_(()=>{const o="bg-white rounded-xl border border-gray-200 overflow-hidden transform transition-all duration-300",s={none:"",sm:"shadow-sm",md:"shadow-md",lg:"shadow-lg"},l=i.hover?"hover:shadow-xl hover:-translate-y-1 transition-all duration-300":"";return[o,s[i.shadow],l].join(" ")}),u=_(()=>{const o={none:"",sm:"p-4",md:"p-6",lg:"p-8"};return i.padding==="md"?"px-4 py-4 sm:px-6 sm:py-6":o[i.padding]});return(o,s)=>(n(),g("div",{class:F(b.value)},[o.$slots.header?(n(),g("div",q,[D(o.$slots,"header")])):C("",!0),o.$slots.image?(n(),g("div",ee,[D(o.$slots,"image")])):C("",!0),a("div",{class:F(u.value)},[D(o.$slots,"default")],2),o.$slots.footer?(n(),g("div",te,[D(o.$slots,"footer")])):C("",!0)],2))}}),se={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},re=I({__name:"BaseButton",props:{variant:{default:"primary"},size:{default:"md"},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},tag:{default:"button"}},setup(m){const i=m,b=_(()=>{const u="inline-flex items-center justify-center font-medium rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 min-h-[44px] -webkit-tap-highlight-color: transparent;",o={primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500 disabled:bg-primary-300 active:bg-primary-800",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-primary-500 disabled:bg-gray-100 active:bg-gray-100",outline:"bg-transparent text-primary-600 border border-primary-600 hover:bg-primary-50 focus:ring-primary-500 disabled:text-primary-300 disabled:border-primary-300 active:bg-primary-100",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500 disabled:text-gray-400 active:bg-gray-200",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 disabled:bg-red-300 active:bg-red-800"},s={sm:"px-3 py-2 text-sm min-w-[80px]",md:"px-4 py-2.5 text-sm min-w-[100px]",lg:"px-6 py-3.5 text-base min-w-[120px]"},l=i.disabled||i.loading?"cursor-not-allowed opacity-60":"cursor-pointer";return[u,o[i.variant],s[i.size],l].join(" ")});return(u,o)=>(n(),M(N(u.tag),Q({class:b.value,disabled:u.disabled||u.loading},u.$attrs),{default:E(()=>[u.loading?(n(),g("svg",se,o[0]||(o[0]=[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):C("",!0),D(u.$slots,"default")]),_:3},16,["class","disabled"]))}}),oe={class:"content-overlay"},le={class:"category-icon"},ne={class:"title-preview"},ie={class:"text-sm font-semibold text-white/90 text-center line-clamp-2"},ce={class:"decorative-dots"},de=I({__name:"BlogImageGenerator",props:{title:{},category:{}},setup(m){const i=m,b=_(()=>{const s=i.title.split("").reduce((d,x)=>(d=(d<<5)-d+x.charCodeAt(0),d&d),0),l=["gradient-blue","gradient-purple","gradient-green","gradient-orange","gradient-pink","gradient-indigo"];return l[Math.abs(s)%l.length]}),u=_(()=>i.title.length>60?i.title.substring(0,60)+"...":i.title),o=_(()=>{var l;const s=((l=i.category)==null?void 0:l.toLowerCase())||"general";return s.includes("tecnolog")||s.includes("tech")?k("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[k("path",{d:"M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"})]):s.includes("inmobiliaria")||s.includes("real estate")||s.includes("propied")?k("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[k("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})]):s.includes("mercado")||s.includes("market")||s.includes("economia")?k("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[k("path",{d:"M7 4V2c0-1.1.9-2 2-2h6c1.1 0 2 .9 2 2v2h4v2H3V4h4zM6 7v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6z"})]):k("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[k("path",{d:"M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"})])});return(s,l)=>(n(),g("div",{class:F(["blog-image-generator",b.value])},[a("div",oe,[a("div",le,[(n(),M(N(o.value),{class:"w-8 h-8 text-white/80"}))]),a("div",ne,[a("h3",ie,y(u.value),1)]),a("div",ce,[(n(),g(R,null,j(6,d=>a("div",{key:d,class:"dot",style:W({animationDelay:`${d*.2}s`})},null,4)),64))])])],2))}}),ge=A(de,[["__scopeId","data-v-987bab3e"]]),ue={key:0,class:"absolute top-2 left-2 sm:top-3 sm:left-3"},me={class:"absolute top-2 right-2 sm:top-3 sm:right-3"},pe={class:"inline-flex items-center px-2 py-1 sm:px-2.5 sm:py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 backdrop-blur-sm"},fe={key:1,class:"relative bg-gray-100"},he={key:0,class:"absolute top-2 left-2 sm:top-3 sm:left-3"},ve={class:"absolute top-2 right-2 sm:top-3 sm:right-3"},be={class:"inline-flex items-center px-2 py-1 sm:px-2.5 sm:py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 backdrop-blur-sm"},ye={class:"space-y-2 sm:space-y-3 flex flex-col flex-1 p-1"},_e={class:"flex-1"},xe={class:"text-base sm:text-lg font-semibold text-gray-900 line-clamp-2 leading-tight"},we={class:"flex items-center mt-1 mb-2"},Be={class:"flex items-center"},Ce=["src","alt"],ke={key:1,class:"w-4 h-4 text-gray-500 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},Le={class:"text-sm text-gray-600 truncate"},ze={class:"text-sm text-gray-500"},$e={class:"text-sm text-gray-600 line-clamp-2 leading-relaxed"},Ee={key:0,class:"flex items-center mt-2 gap-1 flex-wrap"},De={key:0,class:"text-xs text-gray-500"},Me={class:"flex items-center justify-between text-sm text-gray-600 flex-wrap gap-2"},Ie={class:"flex items-center space-x-4"},Pe={key:0,class:"flex items-center space-x-1"},Ve={class:"truncate"},Fe={key:1,class:"flex items-center space-x-1"},Te={class:"truncate"},He={class:"text-xs text-right flex-shrink-0"},Se={class:"pt-3 border-t border-gray-200 mt-auto"},Ne=I({__name:"BlogCard",props:{blog:{}},setup(m){const i=m,b=v(!1),u=v(!1),o=_(()=>{const e=i.blog,c=!!e.featured_image_responsive,z=!!(e.featured_image_url&&e.featured_image_url!=="null"&&e.featured_image_url!=="undefined"&&e.featured_image_url.trim()!==""&&!b.value);return c||z}),s=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),l=e=>e>=1e6?Math.floor(e/1e6)+"M":e>=1e3?Math.floor(e/1e3)+"K":e.toString(),d=()=>{u.value=!0,b.value=!1},x=e=>{b.value=!0};return(e,c)=>(n(),M(X(Y),{to:`/blog/${e.blog.slug}`,class:"block transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-xl"},{default:E(()=>[P(ae,{hover:"",class:"h-full"},{image:E(()=>[o.value?(n(),M(Z,{key:0,src:e.blog.featured_image_responsive||e.blog.featured_image_url,alt:e.blog.title,fallback:e.blog.featured_image_url,"container-class":"relative bg-gray-100","image-class":"w-full h-48 sm:h-52 md:h-56","enable-hover-zoom":!0,loading:"lazy",sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw",onLoad:d,onError:x},{overlay:E(()=>[e.blog.is_featured?(n(),g("div",ue,c[0]||(c[0]=[a("span",{class:"inline-flex items-center px-2 py-1 sm:px-2.5 sm:py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 backdrop-blur-sm"},[a("svg",{class:"w-3 h-3 mr-1",viewBox:"0 0 24 24",fill:"currentColor"},[a("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})]),V(" Destacado ")],-1)]))):C("",!0),a("div",me,[a("span",pe,y(e.blog.category),1)])]),_:1},8,["src","alt","fallback"])):(n(),g("div",fe,[P(ge,{title:e.blog.title,category:e.blog.category,class:"w-full h-48 sm:h-52 md:h-56"},null,8,["title","category"]),e.blog.is_featured?(n(),g("div",he,c[1]||(c[1]=[a("span",{class:"inline-flex items-center px-2 py-1 sm:px-2.5 sm:py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 backdrop-blur-sm"},[a("svg",{class:"w-3 h-3 mr-1",viewBox:"0 0 24 24",fill:"currentColor"},[a("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})]),V(" Destacado ")],-1)]))):C("",!0),a("div",ve,[a("span",be,y(e.blog.category),1)])]))]),default:E(()=>[a("div",ye,[a("div",_e,[a("h3",xe,y(e.blog.title),1),a("div",we,[a("div",Be,[e.blog.author_avatar?(n(),g("img",{key:0,src:e.blog.author_avatar,alt:e.blog.author_name,class:"w-4 h-4 rounded-full mr-2"},null,8,Ce)):(n(),g("svg",ke,c[2]||(c[2]=[a("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},null,-1)]))),a("span",Le,y(e.blog.author_name),1)]),c[3]||(c[3]=a("span",{class:"mx-2 text-gray-400"},"â¢",-1)),a("span",ze,y(s(e.blog.published_at)),1)]),a("p",$e,y(e.blog.excerpt),1),e.blog.tags&&e.blog.tags.length>0?(n(),g("div",Ee,[(n(!0),g(R,null,j(e.blog.tags.slice(0,3),z=>(n(),g("span",{key:z,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700"}," #"+y(z),1))),128)),e.blog.tags.length>3?(n(),g("span",De," +"+y(e.blog.tags.length-3),1)):C("",!0)])):C("",!0)]),a("div",Me,[a("div",Ie,[e.blog.reading_time?(n(),g("div",Pe,[c[4]||(c[4]=a("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12,6 12,12 16,14"})],-1)),a("span",Ve,y(e.blog.reading_time)+" min",1)])):C("",!0),e.blog.views_count?(n(),g("div",Fe,[c[5]||(c[5]=a("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),a("circle",{cx:"12",cy:"12",r:"3"})],-1)),a("span",Te,y(l(e.blog.views_count)),1)])):C("",!0)]),a("div",He,y(e.blog.category),1)]),a("div",Se,[P(re,{variant:"outline",size:"md",class:"w-full text-sm sm:text-base"},{default:E(()=>c[6]||(c[6]=[V(" Leer ArtÃ­culo ",-1)])),_:1,__:[6]})])])]),_:1})]),_:1},8,["to"]))}}),at=A(Ne,[["__scopeId","data-v-6e873854"]]);export{at as B,tt as u};
