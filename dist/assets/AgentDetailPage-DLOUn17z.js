import{d as M,s as w,r as _,i as x,y as A,k as z,w as B,l as V,m as D,c as a,a as e,f as r,t as n,F as H,q as I,u as L,o}from"./index-C4zqXZ63.js";import{u as P}from"./agents-DsgLqB-J.js";import{A as F,_ as S}from"./AppLayout-BvYIGe1K.js";import"./api-DRWUNwWI.js";const E={key:0,class:"loading-container"},$={key:1,class:"error-container"},R={class:"error-content"},N={class:"error-message"},j={key:0,class:"error-details"},T={key:2,class:"agent-detail-container"},q={class:"agent-hero"},O={class:"hero-content"},U={class:"agent-image-section"},G={class:"main-image-container"},J=["src","alt"],K={class:"agent-info-section"},Q={class:"agent-header"},W={class:"agent-name"},X={key:0,class:"agent-type"},Y={class:"contact-info"},Z={key:0,class:"contact-item"},ee=["href"],te={key:1,class:"contact-item"},se=["href"],oe={key:0,class:"social-media"},ae={class:"social-links"},ne=["href"],ie=["href"],le=["href"],re={key:1,class:"stats-section"},ce={class:"stat-item"},de={class:"stat-number"},ue={key:0,class:"agent-biography"},ve={class:"biography-container"},ge={class:"section-title"},he={class:"biography-content"},_e={class:"biography-text"},me={key:1,class:"agent-properties"},pe={class:"properties-container"},ke={class:"section-title"},fe={class:"properties-grid"},be=["onClick"],ye={class:"property-image-container"},Ce=["src","alt"],Me={class:"property-price"},we={class:"property-info"},xe={class:"property-title"},Ae={class:"property-location"},ze={class:"property-details"},Be={key:0,class:"property-detail"},Ve={key:1,class:"property-detail"},De={key:2,class:"property-detail"},He={key:3,class:"not-found-container"},Ie=M({__name:"AgentDetailPage",setup(Le){const f=A(),m=L(),c=P(),{currentAgent:b,loading:Pe,error:Fe}=w(c),t=_(null),u=_(!0),d=_(null),v=x(()=>parseInt(f.params.id)),p=i=>i||"/placeholder-agent.svg",y=i=>new Intl.NumberFormat("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0}).format(i),h=()=>{m.push("/agentes")},C=i=>{m.push(`/propiedades/${i}`)},k=async()=>{var i;if(console.log("fetchAgentData called with agentId:",v.value),u.value=!0,d.value=null,v.value)try{c.agents.length===0&&(console.log("Loading agents list first..."),await c.fetchAgents());const s=c.agents.find(g=>g.id===v.value);console.log("Found existing agent:",s==null?void 0:s.name),s?(t.value=s,console.log("Set agent from existing data")):(console.log("Agent not found in list, fetching from API..."),await c.fetchAgent(v.value),t.value=b.value)}catch(s){console.error("Error in fetchAgentData:",s),d.value="Error al cargar información del agente",t.value=null}finally{u.value=!1,console.log("Loading finished, agent:",(i=t.value)==null?void 0:i.name)}else u.value=!1};return z(()=>{console.log("AgentDetailPage mounted"),k()}),B(t,i=>{console.log("Agent changed:",i==null?void 0:i.name)},{immediate:!0}),(i,s)=>(o(),V(F,null,{default:D(()=>{var g;return[u.value?(o(),a("div",E,s[0]||(s[0]=[e("div",{class:"loading-content"},[e("div",{class:"loading-spinner"}),e("p",{class:"loading-text"},"Cargando información del agente...")],-1)]))):d.value&&!t.value?(o(),a("div",$,[e("div",R,[s[1]||(s[1]=e("svg",{class:"error-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),e("p",N,n(d.value),1),(g=d.value)!=null&&g.includes("servidor")?(o(),a("p",j," El agente puede no estar disponible temporalmente. Por favor, inténtalo más tarde o contacta con el administrador. ")):r("",!0),e("div",{class:"error-actions"},[e("button",{onClick:k,class:"retry-btn"},"Reintentar"),e("button",{onClick:h,class:"back-btn-error"}," Volver a Agentes ")])])])):t.value&&t.value.id?(o(),a("div",T,[e("div",{class:"back-navigation"},[e("button",{onClick:h,class:"back-btn"},s[2]||(s[2]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1),e("span",null,"Volver a Agentes",-1)]))]),e("section",q,[e("div",O,[e("div",U,[e("div",G,[e("img",{src:p(t.value.profile_picture_url),alt:t.value.name,class:"agent-main-image"},null,8,J)])]),e("div",K,[e("div",Q,[e("h1",W,n(t.value.name),1),t.value.type?(o(),a("p",X,n(t.value.type),1)):r("",!0)]),e("div",Y,[t.value.phone?(o(),a("div",Z,[s[3]||(s[3]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})],-1)),e("a",{href:`tel:${t.value.phone}`,class:"contact-link"},n(t.value.phone),9,ee)])):r("",!0),t.value.email?(o(),a("div",te,[s[4]||(s[4]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e("polyline",{points:"22,6 12,13 2,6"})],-1)),e("a",{href:`mailto:${t.value.email}`,class:"contact-link"},n(t.value.email),9,se)])):r("",!0)]),t.value.facebook||t.value.instagram||t.value.linkedin?(o(),a("div",oe,[s[8]||(s[8]=e("h3",null,"Sígueme en redes",-1)),e("div",ae,[t.value.facebook?(o(),a("a",{key:0,href:t.value.facebook,target:"_blank",class:"social-link facebook"},s[5]||(s[5]=[e("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})],-1),e("span",null,"Facebook",-1)]),8,ne)):r("",!0),t.value.instagram?(o(),a("a",{key:1,href:t.value.instagram,target:"_blank",class:"social-link instagram"},s[6]||(s[6]=[e("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.62 5.367 11.987 11.988 11.987 6.62 0 11.987-5.367 11.987-11.987C24.014 5.367 18.647.001 12.017.001zM8.449 16.988c-1.297 0-2.348-1.051-2.348-2.348 0-1.297 1.051-2.348 2.348-2.348 1.297 0 2.348 1.051 2.348 2.348 0 1.297-1.051 2.348-2.348 2.348zm7.718 0c-1.297 0-2.348-1.051-2.348-2.348 0-1.297 1.051-2.348 2.348-2.348 1.297 0 2.348 1.051 2.348 2.348 0 1.297-1.051 2.348-2.348 2.348z"})],-1),e("span",null,"Instagram",-1)]),8,ie)):r("",!0),t.value.linkedin?(o(),a("a",{key:2,href:t.value.linkedin,target:"_blank",class:"social-link linkedin"},s[7]||(s[7]=[e("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})],-1),e("span",null,"LinkedIn",-1)]),8,le)):r("",!0)])])):r("",!0),t.value.properties_count?(o(),a("div",re,[e("div",ce,[e("div",de,n(t.value.properties_count),1),s[9]||(s[9]=e("div",{class:"stat-label"},"Propiedades",-1))])])):r("",!0)])])]),t.value.bio?(o(),a("section",ue,[e("div",ve,[e("h2",ge,"Sobre "+n(t.value.name.split(" ")[0]),1),e("div",he,[e("p",_e,n(t.value.bio),1)])])])):r("",!0),t.value.properties&&t.value.properties.length>0?(o(),a("section",me,[e("div",pe,[e("h2",ke," Propiedades de "+n(t.value.name.split(" ")[0]),1),e("div",fe,[(o(!0),a(H,null,I(t.value.properties,l=>(o(),a("div",{key:l.id,class:"property-card",onClick:Se=>C(l.id)},[e("div",ye,[e("img",{src:p(l.cover_image_url),alt:l.title,class:"property-image"},null,8,Ce),e("div",Me," $"+n(y(l.price)),1)]),e("div",we,[e("h3",xe,n(l.title),1),e("p",Ae,n(l.address)+", "+n(l.city),1),e("div",ze,[l.bedrooms?(o(),a("span",Be,n(l.bedrooms)+" hab. ",1)):r("",!0),l.bathrooms?(o(),a("span",Ve,n(l.bathrooms)+" baños ",1)):r("",!0),l.area?(o(),a("span",De,n(l.area)+" m² ",1)):r("",!0)])])],8,be))),128))])])])):r("",!0)])):(o(),a("div",He,[e("div",{class:"not-found-content"},[s[10]||(s[10]=e("svg",{class:"not-found-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),s[11]||(s[11]=e("p",{class:"not-found-message"},"Agente no encontrado",-1)),e("button",{onClick:h,class:"back-btn-alt"},"Volver a Agentes")])]))]}),_:1}))}}),je=S(Ie,[["__scopeId","data-v-9fcb91dc"]]);export{je as default};
