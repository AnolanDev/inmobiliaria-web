import{A as O,r as b,i as y,d as I,c as u,o as c,f as C,a,h as E,n as P,l as M,I as N,J as Q,m as D,K as k,t as x,F as j,q as A,z as W,x as X,R as Y,j as S,e as H}from"./index-CVzvf6pA.js";import{a as z}from"./api-DRWUNwWI.js";import{_ as K}from"./AppLayout-fGsQGz5g.js";const Ye=O("blogs",()=>{const m=b([]),l=b(null),f=b([]),d=b([]),o=b([]),s=b(!1),n=b(null),g=b({}),_=b({currentPage:1,lastPage:1,perPage:6,total:0}),e=b({}),i=b({}),L=5*60*1e3,$=y(()=>m.value.filter(t=>t.status==="published")),U=y(()=>t=>$.value.filter(r=>r.category===t)),R=y(()=>t=>$.value.filter(r=>r.tags.includes(t))),G=y(()=>$.value.slice().sort((t,r)=>new Date(r.published_at).getTime()-new Date(t.published_at).getTime()).slice(0,6)),J=y(()=>$.value.slice().sort((t,r)=>(r.views_count||0)-(t.views_count||0)).slice(0,6)),T=(t,r)=>JSON.stringify({filters:t,page:r}),V=t=>{const r=i.value[t];return r&&Date.now()-r<L};return{blogs:m,currentBlog:l,featuredBlogs:f,categories:d,tags:o,isLoading:s,error:n,filters:g,pagination:_,publishedBlogs:$,blogsByCategory:U,blogsByTag:R,recentBlogs:G,popularBlogs:J,fetchBlogs:async(t,r=1)=>{var p,h;try{s.value=!0,n.value=null,t&&(g.value={...g.value,...t});const w={...g.value},v=T(w,r);if(V(v)&&e.value[v]){const F=e.value[v];m.value=F.data,_.value=F.pagination,s.value=!1;return}const B=await z.getBlogs({...w,page:r,with:"media,image,featured_image",include:"featured_image,gallery,media,image",fields:"*"});m.value=B.data,B.meta&&(_.value={currentPage:B.meta.current_page,lastPage:B.meta.last_page,perPage:B.meta.per_page,total:B.meta.total}),e.value[v]={data:B.data,pagination:_.value},i.value[v]=Date.now()}catch(w){n.value=((h=(p=w.response)==null?void 0:p.data)==null?void 0:h.message)||"Error al cargar los blogs",console.error("Error fetching blogs:",w)}finally{s.value=!1}},loadMoreBlogs:async t=>{var r,p;try{s.value=!0,n.value=null;const h={...g.value},w=T(h,t);if(V(w)&&e.value[w]){const B=e.value[w];m.value=[...m.value,...B.data],_.value=B.pagination,s.value=!1;return}const v=await z.getBlogs({...h,page:t,with:"media,image,featured_image",include:"featured_image,gallery,media,image",fields:"*"});m.value=[...m.value,...v.data],v.meta&&(_.value={currentPage:v.meta.current_page,lastPage:v.meta.last_page,perPage:v.meta.per_page,total:v.meta.total}),e.value[w]={data:v.data,pagination:_.value},i.value[w]=Date.now()}catch(h){n.value=((p=(r=h.response)==null?void 0:r.data)==null?void 0:p.message)||"Error al cargar mÃ¡s blogs",console.error("Error loading more blogs:",h)}finally{s.value=!1}},fetchBlog:async t=>{var r,p;try{s.value=!0,n.value=null;const h=await z.getBlog(t);return l.value=h,h}catch(h){throw n.value=((p=(r=h.response)==null?void 0:r.data)==null?void 0:p.message)||"Error al cargar el blog",console.error("Error fetching blog:",h),h}finally{s.value=!1}},fetchFeaturedBlogs:async()=>{var t,r;try{s.value=!0,n.value=null;const p=await z.getFeaturedBlogs();return f.value=p,p}catch(p){n.value=((r=(t=p.response)==null?void 0:t.data)==null?void 0:r.message)||"Error al cargar blogs destacados",console.error("Error fetching featured blogs:",p)}finally{s.value=!1}},fetchBlogCategories:async()=>{try{const t=await z.getBlogCategories();return d.value=t,t}catch(t){console.error("Error fetching blog categories:",t)}},fetchBlogTags:async()=>{try{const t=await z.getBlogTags();return o.value=t,t}catch(t){console.error("Error fetching blog tags:",t)}},setFilters:t=>{g.value={...g.value,...t}},clearFilters:()=>{g.value={}},clearError:()=>{n.value=null},clearCurrentBlog:()=>{l.value=null},searchBlogs:t=>$.value.filter(r=>r.title.toLowerCase().includes(t.toLowerCase())||r.excerpt.toLowerCase().includes(t.toLowerCase())||r.content.toLowerCase().includes(t.toLowerCase())||r.tags.some(p=>p.toLowerCase().includes(t.toLowerCase())))}}),Z={key:0,class:"px-6 py-4 border-b border-gray-200"},q={key:1,class:"relative"},ee={key:2,class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},te=I({__name:"BaseCard",props:{hover:{type:Boolean,default:!0},padding:{default:"md"},shadow:{default:"sm"}},setup(m){const l=m,f=y(()=>{const o="bg-white rounded-xl border border-gray-200 overflow-hidden transform transition-all duration-300",s={none:"",sm:"shadow-sm",md:"shadow-md",lg:"shadow-lg"},n=l.hover?"hover:shadow-xl hover:-translate-y-1 transition-all duration-300":"";return[o,s[l.shadow],n].join(" ")}),d=y(()=>{const o={none:"",sm:"p-4",md:"p-6",lg:"p-8"};return l.padding==="md"?"px-4 py-4 sm:px-6 sm:py-6":o[l.padding]});return(o,s)=>(c(),u("div",{class:P(f.value)},[o.$slots.header?(c(),u("div",Z,[E(o.$slots,"header")])):C("",!0),o.$slots.image?(c(),u("div",q,[E(o.$slots,"image")])):C("",!0),a("div",{class:P(d.value)},[E(o.$slots,"default")],2),o.$slots.footer?(c(),u("div",ee,[E(o.$slots,"footer")])):C("",!0)],2))}}),ae={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},se=I({__name:"BaseButton",props:{variant:{default:"primary"},size:{default:"md"},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},tag:{default:"button"}},setup(m){const l=m,f=y(()=>{const d="inline-flex items-center justify-center font-medium rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 min-h-[44px] -webkit-tap-highlight-color: transparent;",o={primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500 disabled:bg-primary-300 active:bg-primary-800",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-primary-500 disabled:bg-gray-100 active:bg-gray-100",outline:"bg-transparent text-primary-600 border border-primary-600 hover:bg-primary-50 focus:ring-primary-500 disabled:text-primary-300 disabled:border-primary-300 active:bg-primary-100",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500 disabled:text-gray-400 active:bg-gray-200",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 disabled:bg-red-300 active:bg-red-800"},s={sm:"px-3 py-2 text-sm min-w-[80px]",md:"px-4 py-2.5 text-sm min-w-[100px]",lg:"px-6 py-3.5 text-base min-w-[120px]"},n=l.disabled||l.loading?"cursor-not-allowed opacity-60":"cursor-pointer";return[d,o[l.variant],s[l.size],n].join(" ")});return(d,o)=>(c(),M(N(d.tag),Q({class:f.value,disabled:d.disabled||d.loading},d.$attrs),{default:D(()=>[d.loading?(c(),u("svg",ae,o[0]||(o[0]=[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):C("",!0),E(d.$slots,"default")]),_:3},16,["class","disabled"]))}}),re={class:"content-overlay"},oe={class:"category-icon"},le={class:"title-preview"},ne={class:"text-sm font-semibold text-white/90 text-center line-clamp-2"},ie={class:"decorative-dots"},ce=I({__name:"BlogImageGenerator",props:{title:{},category:{}},setup(m){const l=m,f=y(()=>{const s=l.title.split("").reduce((g,_)=>(g=(g<<5)-g+_.charCodeAt(0),g&g),0),n=["gradient-blue","gradient-purple","gradient-green","gradient-orange","gradient-pink","gradient-indigo"];return n[Math.abs(s)%n.length]}),d=y(()=>l.title.length>60?l.title.substring(0,60)+"...":l.title),o=y(()=>{var n;const s=((n=l.category)==null?void 0:n.toLowerCase())||"general";return s.includes("tecnolog")||s.includes("tech")?k("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[k("path",{d:"M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"})]):s.includes("inmobiliaria")||s.includes("real estate")||s.includes("propied")?k("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[k("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})]):s.includes("mercado")||s.includes("market")||s.includes("economia")?k("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[k("path",{d:"M7 4V2c0-1.1.9-2 2-2h6c1.1 0 2 .9 2 2v2h4v2H3V4h4zM6 7v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6z"})]):k("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[k("path",{d:"M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"})])});return(s,n)=>(c(),u("div",{class:P(["blog-image-generator",f.value])},[a("div",re,[a("div",oe,[(c(),M(N(o.value),{class:"w-8 h-8 text-white/80"}))]),a("div",le,[a("h3",ne,x(d.value),1)]),a("div",ie,[(c(),u(j,null,A(6,g=>a("div",{key:g,class:"dot",style:W({animationDelay:`${g*.2}s`})},null,4)),64))])])],2))}}),ge=K(ce,[["__scopeId","data-v-987bab3e"]]),de={class:"relative bg-gray-100"},ue=["src","alt"],me={key:2,class:"absolute top-2 left-2 sm:top-3 sm:left-3"},pe={class:"absolute top-2 right-2 sm:top-3 sm:right-3"},he={class:"inline-flex items-center px-2 py-1 sm:px-2.5 sm:py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 backdrop-blur-sm"},fe={class:"space-y-2 sm:space-y-3 flex flex-col flex-1 p-1"},ve={class:"flex-1"},be={class:"text-base sm:text-lg font-semibold text-gray-900 line-clamp-2 leading-tight"},ye={class:"flex items-center mt-1 mb-2"},_e={class:"flex items-center"},we=["src","alt"],xe={key:1,class:"w-4 h-4 text-gray-500 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},Be={class:"text-sm text-gray-600 truncate"},Ce={class:"text-sm text-gray-500"},ke={class:"text-sm text-gray-600 line-clamp-2 leading-relaxed"},$e={key:0,class:"flex items-center mt-2 gap-1 flex-wrap"},ze={key:0,class:"text-xs text-gray-500"},Le={class:"flex items-center justify-between text-sm text-gray-600 flex-wrap gap-2"},Ee={class:"flex items-center space-x-4"},De={key:0,class:"flex items-center space-x-1"},Me={class:"truncate"},Ie={key:1,class:"flex items-center space-x-1"},Pe={class:"truncate"},Te={class:"text-xs text-right flex-shrink-0"},Ve={class:"pt-3 border-t border-gray-200 mt-auto"},Fe=I({__name:"BlogCard",props:{blog:{}},setup(m){const l=m,f=b(!1),d=b(!1);y(()=>{const e=l.blog,i=e.featured_image_url||e.featured_image||e.image||e.banner||e.cover||e.thumbnail;return!!(i&&i!=="null"&&i!=="undefined"&&i.trim()!==""&&!f.value)});const o=y(()=>{const e=l.blog.featured_image_url||l.blog.featured_image;return e?e.includes("app.tierrasonada.com")?e.replace("https://app.tierrasonada.com","").replace("http://app.tierrasonada.com",""):e:""}),s=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),n=e=>e>=1e6?Math.floor(e/1e6)+"M":e>=1e3?Math.floor(e/1e3)+"K":e.toString(),g=()=>{f.value=!0},_=()=>{d.value=!0,f.value=!1};return(e,i)=>(c(),M(X(Y),{to:`/blog/${e.blog.slug}`,class:"block transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-xl"},{default:D(()=>[S(te,{hover:"",class:"h-full"},{image:D(()=>[a("div",de,[o.value&&!f.value?(c(),u("img",{key:0,src:o.value,alt:e.blog.title,class:"w-full h-48 sm:h-52 md:h-56 object-cover transition-transform duration-300 hover:scale-110",loading:"lazy",onError:g,onLoad:_},null,40,ue)):(c(),M(ge,{key:1,title:e.blog.title,category:e.blog.category,class:"w-full h-48 sm:h-52 md:h-56"},null,8,["title","category"])),e.blog.is_featured?(c(),u("div",me,i[0]||(i[0]=[a("span",{class:"inline-flex items-center px-2 py-1 sm:px-2.5 sm:py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 backdrop-blur-sm"},[a("svg",{class:"w-3 h-3 mr-1",viewBox:"0 0 24 24",fill:"currentColor"},[a("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})]),H(" Destacado ")],-1)]))):C("",!0),a("div",pe,[a("span",he,x(e.blog.category),1)])])]),default:D(()=>[a("div",fe,[a("div",ve,[a("h3",be,x(e.blog.title),1),a("div",ye,[a("div",_e,[e.blog.author_avatar?(c(),u("img",{key:0,src:e.blog.author_avatar,alt:e.blog.author_name,class:"w-4 h-4 rounded-full mr-2"},null,8,we)):(c(),u("svg",xe,i[1]||(i[1]=[a("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},null,-1)]))),a("span",Be,x(e.blog.author_name),1)]),i[2]||(i[2]=a("span",{class:"mx-2 text-gray-400"},"â¢",-1)),a("span",Ce,x(s(e.blog.published_at)),1)]),a("p",ke,x(e.blog.excerpt),1),e.blog.tags&&e.blog.tags.length>0?(c(),u("div",$e,[(c(!0),u(j,null,A(e.blog.tags.slice(0,3),L=>(c(),u("span",{key:L,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700"}," #"+x(L),1))),128)),e.blog.tags.length>3?(c(),u("span",ze," +"+x(e.blog.tags.length-3),1)):C("",!0)])):C("",!0)]),a("div",Le,[a("div",Ee,[e.blog.reading_time?(c(),u("div",De,[i[3]||(i[3]=a("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12,6 12,12 16,14"})],-1)),a("span",Me,x(e.blog.reading_time)+" min",1)])):C("",!0),e.blog.views_count?(c(),u("div",Ie,[i[4]||(i[4]=a("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),a("circle",{cx:"12",cy:"12",r:"3"})],-1)),a("span",Pe,x(n(e.blog.views_count)),1)])):C("",!0)]),a("div",Te,x(e.blog.category),1)]),a("div",Ve,[S(se,{variant:"outline",size:"md",class:"w-full text-sm sm:text-base"},{default:D(()=>i[5]||(i[5]=[H(" Leer ArtÃ­culo ",-1)])),_:1,__:[5]})])])]),_:1})]),_:1},8,["to"]))}}),Ze=K(Fe,[["__scopeId","data-v-b93ecac0"]]);export{Ze as B,Ye as u};
