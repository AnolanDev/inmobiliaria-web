import{y as W,r as _,i as x,d as V,c as v,o as g,f as k,a,h as M,n as N,g as S,I as K,J as X,l as P,K as E,t as B,F as U,p as G,x as Y,q as Z,R as q,j as T,e as H}from"./index-BkE6U2tp.js";import{a as z}from"./api-Cpf0xzVV.js";import{_ as J}from"./AppLayout-BJ0DIrYw.js";import{R as ee}from"./ResponsiveImage-oMFbyBJt.js";const rt=W("blogs",()=>{const h=_([]),c=_(null),y=_([]),p=_([]),i=_([]),r=_(!1),l=_(null),m=_({}),w=_({currentPage:1,lastPage:1,perPage:6,total:0}),L=_({}),e=_({}),d=5*60*1e3,b=x(()=>h.value.filter(t=>t.status==="published")),I=x(()=>t=>b.value.filter(s=>s.category===t)),$=x(()=>t=>b.value.filter(s=>s.tags.includes(t))),O=x(()=>b.value.slice().sort((t,s)=>new Date(s.published_at).getTime()-new Date(t.published_at).getTime()).slice(0,6)),Q=x(()=>b.value.slice().sort((t,s)=>(s.views_count||0)-(t.views_count||0)).slice(0,6)),D=t=>{const s={...t},o=["cover_image_url","featured_image_url","featured_image","cover_image","image","banner","cover","thumbnail"];let n=null;for(const f of o){const u=t[f];if(u&&u!=="null"&&u!=="undefined"&&typeof u=="string"){n=u;break}}return n&&(s.featured_image_url=n,s.featured_image=n),s},A=(t,s)=>JSON.stringify({filters:t,page:s}),R=t=>{const s=e.value[t];return s&&Date.now()-s<d};return{blogs:h,currentBlog:c,featuredBlogs:y,categories:p,tags:i,isLoading:r,error:l,filters:m,pagination:w,publishedBlogs:b,blogsByCategory:I,blogsByTag:$,recentBlogs:O,popularBlogs:Q,fetchBlogs:async(t,s=1)=>{var o,n;try{r.value=!0,l.value=null,t&&(m.value={...m.value,...t});const f={...m.value},u=A(f,s);if(R(u)&&L.value[u]){const j=L.value[u];h.value=j.data,w.value=j.pagination,r.value=!1;return}const C=await z.getBlogs({...f,page:s,fields:"id,title,slug,excerpt,cover_image_url,featured_image_url,author,category,tags,status,published_at,views_count,reading_time,is_featured"}),F=C.data.map(D);h.value=F,C.meta&&(w.value={currentPage:C.meta.current_page,lastPage:C.meta.last_page,perPage:C.meta.per_page,total:C.meta.total}),L.value[u]={data:C.data,pagination:w.value},e.value[u]=Date.now()}catch(f){l.value=((n=(o=f.response)==null?void 0:o.data)==null?void 0:n.message)||"Error al cargar los blogs",console.error("Error fetching blogs:",f)}finally{r.value=!1}},loadMoreBlogs:async t=>{var s,o;try{r.value=!0,l.value=null;const n={...m.value},f=A(n,t);if(R(f)&&L.value[f]){const F=L.value[f];h.value=[...h.value,...F.data],w.value=F.pagination,r.value=!1;return}const u=await z.getBlogs({...n,page:t,fields:"id,title,slug,excerpt,cover_image_url,featured_image_url,author,category,tags,status,published_at,views_count,reading_time,is_featured"}),C=u.data.map(D);h.value=[...h.value,...C],u.meta&&(w.value={currentPage:u.meta.current_page,lastPage:u.meta.last_page,perPage:u.meta.per_page,total:u.meta.total}),L.value[f]={data:u.data,pagination:w.value},e.value[f]=Date.now()}catch(n){l.value=((o=(s=n.response)==null?void 0:s.data)==null?void 0:o.message)||"Error al cargar más blogs",console.error("Error loading more blogs:",n)}finally{r.value=!1}},fetchBlog:async t=>{var s,o;try{r.value=!0,l.value=null;const n=await z.getBlog(t);return c.value=n,n}catch(n){throw l.value=((o=(s=n.response)==null?void 0:s.data)==null?void 0:o.message)||"Error al cargar el blog",console.error("Error fetching blog:",n),n}finally{r.value=!1}},fetchFeaturedBlogs:async()=>{var t,s;try{r.value=!0,l.value=null;const n=(await z.getFeaturedBlogs()).map(D);return y.value=n,n}catch(o){l.value=((s=(t=o.response)==null?void 0:t.data)==null?void 0:s.message)||"Error al cargar blogs destacados",console.error("Error fetching featured blogs:",o)}finally{r.value=!1}},fetchBlogCategories:async()=>{try{const t=await z.getBlogCategories();return p.value=t,t}catch(t){console.error("Error fetching blog categories:",t)}},fetchBlogTags:async()=>{try{const t=await z.getBlogTags();return i.value=t,t}catch(t){console.error("Error fetching blog tags:",t)}},initializeBlogsPage:async()=>{var t,s;try{r.value=!0,l.value=null;const o=await z.getBlogs({per_page:6,fields:"id,title,slug,excerpt,cover_image_url,featured_image_url,author,category,tags,status,published_at,views_count,reading_time,is_featured"}),n=o.data.map(D);h.value=n,o.meta&&(w.value={currentPage:o.meta.current_page,lastPage:o.meta.last_page,perPage:o.meta.per_page,total:o.meta.total}),Promise.allSettled([z.getFeaturedBlogs(),z.getBlogCategories()]).then(([f,u])=>{if(f.status==="fulfilled"){const C=f.value.map(D);y.value=C}u.status==="fulfilled"&&(p.value=u.value)}).catch(f=>{console.warn("Error loading secondary blog data:",f)})}catch(o){l.value=((s=(t=o.response)==null?void 0:t.data)==null?void 0:s.message)||"Error al cargar los datos de blogs",console.error("Error initializing blogs page:",o)}finally{r.value=!1}},setFilters:t=>{m.value={...m.value,...t}},clearFilters:()=>{m.value={}},clearError:()=>{l.value=null},clearCurrentBlog:()=>{c.value=null},searchBlogs:t=>b.value.filter(s=>s.title.toLowerCase().includes(t.toLowerCase())||s.excerpt.toLowerCase().includes(t.toLowerCase())||s.content.toLowerCase().includes(t.toLowerCase())||s.tags.some(o=>o.toLowerCase().includes(t.toLowerCase())))}}),te={key:0,class:"px-6 py-4 border-b border-gray-200"},ae={key:1,class:"relative"},se={key:2,class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},re=V({__name:"BaseCard",props:{hover:{type:Boolean,default:!0},padding:{default:"md"},shadow:{default:"sm"}},setup(h){const c=h,y=x(()=>{const i="bg-white rounded-xl border border-gray-200 overflow-hidden transform transition-all duration-300",r={none:"",sm:"shadow-sm",md:"shadow-md",lg:"shadow-lg"},l=c.hover?"hover:shadow-xl hover:-translate-y-1 transition-all duration-300":"";return[i,r[c.shadow],l].join(" ")}),p=x(()=>{const i={none:"",sm:"p-4",md:"p-6",lg:"p-8"};return c.padding==="md"?"px-4 py-4 sm:px-6 sm:py-6":i[c.padding]});return(i,r)=>(g(),v("div",{class:N(y.value)},[i.$slots.header?(g(),v("div",te,[M(i.$slots,"header")])):k("",!0),i.$slots.image?(g(),v("div",ae,[M(i.$slots,"image")])):k("",!0),a("div",{class:N(p.value)},[M(i.$slots,"default")],2),i.$slots.footer?(g(),v("div",se,[M(i.$slots,"footer")])):k("",!0)],2))}}),oe={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},le=V({__name:"BaseButton",props:{variant:{default:"primary"},size:{default:"md"},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},tag:{default:"button"}},setup(h){const c=h,y=x(()=>{const p="inline-flex items-center justify-center font-medium rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 min-h-[44px] -webkit-tap-highlight-color: transparent;",i={primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500 disabled:bg-primary-300 active:bg-primary-800",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-primary-500 disabled:bg-gray-100 active:bg-gray-100",outline:"bg-transparent text-primary-600 border border-primary-600 hover:bg-primary-50 focus:ring-primary-500 disabled:text-primary-300 disabled:border-primary-300 active:bg-primary-100",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500 disabled:text-gray-400 active:bg-gray-200",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 disabled:bg-red-300 active:bg-red-800"},r={sm:"px-3 py-2 text-sm min-w-[80px]",md:"px-4 py-2.5 text-sm min-w-[100px]",lg:"px-6 py-3.5 text-base min-w-[120px]"},l=c.disabled||c.loading?"cursor-not-allowed opacity-60":"cursor-pointer";return[p,i[c.variant],r[c.size],l].join(" ")});return(p,i)=>(g(),S(K(p.tag),X({class:y.value,disabled:p.disabled||p.loading},p.$attrs),{default:P(()=>[p.loading?(g(),v("svg",oe,i[0]||(i[0]=[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):k("",!0),M(p.$slots,"default")]),_:3},16,["class","disabled"]))}}),ne={class:"content-overlay"},ie={class:"category-icon"},ce={class:"title-preview"},ue={class:"text-sm font-semibold text-white/90 text-center line-clamp-2"},ge={class:"decorative-dots"},de=V({__name:"BlogImageGenerator",props:{title:{},category:{}},setup(h){const c=h,y=x(()=>{const r=c.title.split("").reduce((m,w)=>(m=(m<<5)-m+w.charCodeAt(0),m&m),0),l=["gradient-blue","gradient-purple","gradient-green","gradient-orange","gradient-pink","gradient-indigo"];return l[Math.abs(r)%l.length]}),p=x(()=>c.title.length>60?c.title.substring(0,60)+"...":c.title),i=x(()=>{var l;const r=((l=c.category)==null?void 0:l.toLowerCase())||"general";return r.includes("tecnolog")||r.includes("tech")?E("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[E("path",{d:"M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"})]):r.includes("inmobiliaria")||r.includes("real estate")||r.includes("propied")?E("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[E("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})]):r.includes("mercado")||r.includes("market")||r.includes("economia")?E("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[E("path",{d:"M7 4V2c0-1.1.9-2 2-2h6c1.1 0 2 .9 2 2v2h4v2H3V4h4zM6 7v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6z"})]):E("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[E("path",{d:"M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"})])});return(r,l)=>(g(),v("div",{class:N(["blog-image-generator",y.value])},[a("div",ne,[a("div",ie,[(g(),S(K(i.value),{class:"w-8 h-8 text-white/80"}))]),a("div",ce,[a("h3",ue,B(p.value),1)]),a("div",ge,[(g(),v(U,null,G(6,m=>a("div",{key:m,class:"dot",style:Y({animationDelay:`${m*.2}s`})},null,4)),64))])])],2))}}),me=J(de,[["__scopeId","data-v-987bab3e"]]),pe={key:0,class:"absolute top-2 left-2 sm:top-3 sm:left-3"},fe={class:"absolute top-2 right-2 sm:top-3 sm:right-3"},ve={class:"inline-flex items-center px-2 py-1 sm:px-2.5 sm:py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 backdrop-blur-sm"},he={key:1,class:"relative bg-gray-100"},be={key:0,class:"absolute top-2 left-2 sm:top-3 sm:left-3"},ye={class:"absolute top-2 right-2 sm:top-3 sm:right-3"},_e={class:"inline-flex items-center px-2 py-1 sm:px-2.5 sm:py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 backdrop-blur-sm"},xe={class:"space-y-2 sm:space-y-3 flex flex-col flex-1 p-1"},we={class:"flex-1"},Be={class:"text-base sm:text-lg font-semibold text-gray-900 line-clamp-2 leading-tight"},Ce={class:"flex items-center mt-1 mb-2"},ke={class:"flex items-center"},ze=["src","alt"],Le={key:1,class:"w-4 h-4 text-gray-500 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},$e={class:"text-sm text-gray-600 truncate"},Ee={class:"text-sm text-gray-500"},Ie={class:"text-sm text-gray-600 line-clamp-2 leading-relaxed"},Pe={key:0,class:"flex items-center mt-2 gap-1 flex-wrap"},De={key:0,class:"text-xs text-gray-500"},Me={class:"flex items-center justify-between text-sm text-gray-600 flex-wrap gap-2"},Fe={class:"flex items-center space-x-4"},Se={key:0,class:"flex items-center space-x-1"},Ve={class:"truncate"},Te={key:1,class:"flex items-center space-x-1"},He={class:"truncate"},Ne={class:"text-xs text-right flex-shrink-0"},Ae={class:"pt-3 border-t border-gray-200 mt-auto"},Re=V({__name:"BlogCard",props:{blog:{}},setup(h){const c=h,y=_(!1),p=_(!1),i=x(()=>{const e=c.blog,d=!!e.featured_image_responsive,b=!!(e.featured_image_url&&e.featured_image_url!=="null"&&e.featured_image_url!=="undefined"&&e.featured_image_url.trim()!==""&&!y.value),I=!!(e.cover_image_url&&e.cover_image_url!=="null"&&e.cover_image_url!=="undefined"||e.cover_image&&e.cover_image!=="null"&&e.cover_image!=="undefined"||e.image&&e.image!=="null"&&e.image!=="undefined"||e.banner&&e.banner!=="null"&&e.banner!=="undefined"||e.cover&&e.cover!=="null"&&e.cover!=="undefined"||e.thumbnail&&e.thumbnail!=="null"&&e.thumbnail!=="undefined");return d||b||I}),r=x(()=>{var b,I;const e=c.blog,d=[e.cover_image_url,(I=(b=e.featured_image_responsive)==null?void 0:b.original)==null?void 0:I.url,e.featured_image_url,e.featured_image,e.cover_image,e.image,e.banner,e.cover,e.thumbnail];for(const $ of d)if($&&$!=="null"&&$!=="undefined"&&$.trim()!=="")return $;return null}),l=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),m=e=>e>=1e6?Math.floor(e/1e6)+"M":e>=1e3?Math.floor(e/1e3)+"K":e.toString(),w=()=>{p.value=!0,y.value=!1},L=e=>{y.value=!0};return(e,d)=>(g(),S(Z(q),{to:`/blog/${e.blog.slug}`,class:"block transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-xl"},{default:P(()=>[T(re,{hover:"",class:"h-full"},{image:P(()=>[i.value?(g(),S(ee,{key:0,src:r.value,alt:e.blog.title,fallback:r.value,"container-class":"relative bg-gray-100","image-class":"w-full h-48 sm:h-52 md:h-56","enable-hover-zoom":!0,loading:"lazy",decoding:"async",fetchpriority:"low",sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw",onLoad:w,onError:L},{overlay:P(()=>[e.blog.is_featured?(g(),v("div",pe,d[0]||(d[0]=[a("span",{class:"inline-flex items-center px-2 py-1 sm:px-2.5 sm:py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 backdrop-blur-sm"},[a("svg",{class:"w-3 h-3 mr-1",viewBox:"0 0 24 24",fill:"currentColor"},[a("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})]),H(" Destacado ")],-1)]))):k("",!0),a("div",fe,[a("span",ve,B(e.blog.category),1)])]),_:1},8,["src","alt","fallback"])):(g(),v("div",he,[T(me,{title:e.blog.title,category:e.blog.category,class:"w-full h-48 sm:h-52 md:h-56"},null,8,["title","category"]),e.blog.is_featured?(g(),v("div",be,d[1]||(d[1]=[a("span",{class:"inline-flex items-center px-2 py-1 sm:px-2.5 sm:py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 backdrop-blur-sm"},[a("svg",{class:"w-3 h-3 mr-1",viewBox:"0 0 24 24",fill:"currentColor"},[a("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})]),H(" Destacado ")],-1)]))):k("",!0),a("div",ye,[a("span",_e,B(e.blog.category),1)])]))]),default:P(()=>[a("div",xe,[a("div",we,[a("h3",Be,B(e.blog.title),1),a("div",Ce,[a("div",ke,[e.blog.author_avatar?(g(),v("img",{key:0,src:e.blog.author_avatar,alt:e.blog.author_name,class:"w-4 h-4 rounded-full mr-2"},null,8,ze)):(g(),v("svg",Le,d[2]||(d[2]=[a("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},null,-1)]))),a("span",$e,B(e.blog.author_name),1)]),d[3]||(d[3]=a("span",{class:"mx-2 text-gray-400"},"•",-1)),a("span",Ee,B(l(e.blog.published_at)),1)]),a("p",Ie,B(e.blog.excerpt),1),e.blog.tags&&e.blog.tags.length>0?(g(),v("div",Pe,[(g(!0),v(U,null,G(e.blog.tags.slice(0,3),b=>(g(),v("span",{key:b,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700"}," #"+B(b),1))),128)),e.blog.tags.length>3?(g(),v("span",De," +"+B(e.blog.tags.length-3),1)):k("",!0)])):k("",!0)]),a("div",Me,[a("div",Fe,[e.blog.reading_time?(g(),v("div",Se,[d[4]||(d[4]=a("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("circle",{cx:"12",cy:"12",r:"10"}),a("polyline",{points:"12,6 12,12 16,14"})],-1)),a("span",Ve,B(e.blog.reading_time)+" min",1)])):k("",!0),e.blog.views_count?(g(),v("div",Te,[d[5]||(d[5]=a("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),a("circle",{cx:"12",cy:"12",r:"3"})],-1)),a("span",He,B(m(e.blog.views_count)),1)])):k("",!0)]),a("div",Ne,B(e.blog.category),1)]),a("div",Ae,[T(le,{variant:"outline",size:"md",class:"w-full text-sm sm:text-base"},{default:P(()=>d[6]||(d[6]=[H(" Leer Artículo ",-1)])),_:1,__:[6]})])])]),_:1})]),_:1},8,["to"]))}}),ot=J(Re,[["__scopeId","data-v-23ce159b"]]);export{ot as B,rt as u};
