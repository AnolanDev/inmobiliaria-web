import{y as W,r as _,i as x,d as V,c as p,o as g,f as C,a as t,h as M,n as H,g as S,I as K,J as X,l as P,K as E,t as B,F as U,p as G,x as Y,q as Z,R as q,j as T,e as R}from"./index-CLjf9c0j.js";import{a as z}from"./api-Cpf0xzVV.js";import{_ as J}from"./AppLayout-5LHCOzVs.js";import{R as ee}from"./ResponsiveImage-CRP1Gd7Z.js";const ra=W("blogs",()=>{const v=_([]),u=_(null),y=_([]),f=_([]),i=_([]),r=_(!1),n=_(null),m=_({}),w=_({currentPage:1,lastPage:1,perPage:6,total:0}),L=_({}),e=_({}),d=5*60*1e3,b=x(()=>v.value.filter(a=>a.status==="published")),I=x(()=>a=>b.value.filter(s=>s.category===a)),$=x(()=>a=>b.value.filter(s=>s.tags.includes(a))),O=x(()=>b.value.slice().sort((a,s)=>new Date(s.published_at).getTime()-new Date(a.published_at).getTime()).slice(0,6)),Q=x(()=>b.value.slice().sort((a,s)=>(s.views_count||0)-(a.views_count||0)).slice(0,6)),D=a=>{const s={...a},l=["cover_image_url","featured_image_url","featured_image","cover_image","image","banner","cover","thumbnail"];let o=null;for(const h of l){const c=a[h];if(c&&c!=="null"&&c!=="undefined"&&typeof c=="string"){o=c;break}}return o&&(s.featured_image_url=o,s.featured_image=o),s},N=(a,s)=>JSON.stringify({filters:a,page:s}),A=a=>{const s=e.value[a];return s&&Date.now()-s<d};return{blogs:v,currentBlog:u,featuredBlogs:y,categories:f,tags:i,isLoading:r,error:n,filters:m,pagination:w,publishedBlogs:b,blogsByCategory:I,blogsByTag:$,recentBlogs:O,popularBlogs:Q,fetchBlogs:async(a,s=1)=>{var l,o;try{r.value=!0,n.value=null,a&&(m.value={...m.value,...a});const h={...m.value},c=N(h,s);if(A(c)&&L.value[c]){const j=L.value[c];v.value=j.data,w.value=j.pagination,r.value=!1;return}const k=await z.getBlogs({...h,page:s,with:"media,image,featured_image,banner,cover,thumbnail",include:"featured_image,gallery,media,image,banner,cover,thumbnail",fields:"*",expand:"featured_image_url,gallery_urls"}),F=k.data.map(D);v.value=F,k.meta&&(w.value={currentPage:k.meta.current_page,lastPage:k.meta.last_page,perPage:k.meta.per_page,total:k.meta.total}),L.value[c]={data:k.data,pagination:w.value},e.value[c]=Date.now()}catch(h){n.value=((o=(l=h.response)==null?void 0:l.data)==null?void 0:o.message)||"Error al cargar los blogs",console.error("Error fetching blogs:",h)}finally{r.value=!1}},loadMoreBlogs:async a=>{var s,l;try{r.value=!0,n.value=null;const o={...m.value},h=N(o,a);if(A(h)&&L.value[h]){const F=L.value[h];v.value=[...v.value,...F.data],w.value=F.pagination,r.value=!1;return}const c=await z.getBlogs({...o,page:a,with:"media,image,featured_image,banner,cover,thumbnail",include:"featured_image,gallery,media,image,banner,cover,thumbnail",fields:"*",expand:"featured_image_url,gallery_urls"}),k=c.data.map(D);v.value=[...v.value,...k],c.meta&&(w.value={currentPage:c.meta.current_page,lastPage:c.meta.last_page,perPage:c.meta.per_page,total:c.meta.total}),L.value[h]={data:c.data,pagination:w.value},e.value[h]=Date.now()}catch(o){n.value=((l=(s=o.response)==null?void 0:s.data)==null?void 0:l.message)||"Error al cargar más blogs",console.error("Error loading more blogs:",o)}finally{r.value=!1}},fetchBlog:async a=>{var s,l;try{r.value=!0,n.value=null;const o=await z.getBlog(a);return u.value=o,o}catch(o){throw n.value=((l=(s=o.response)==null?void 0:s.data)==null?void 0:l.message)||"Error al cargar el blog",console.error("Error fetching blog:",o),o}finally{r.value=!1}},fetchFeaturedBlogs:async()=>{var a,s;try{r.value=!0,n.value=null;const o=(await z.getFeaturedBlogs()).map(D);return y.value=o,o}catch(l){n.value=((s=(a=l.response)==null?void 0:a.data)==null?void 0:s.message)||"Error al cargar blogs destacados",console.error("Error fetching featured blogs:",l)}finally{r.value=!1}},fetchBlogCategories:async()=>{try{const a=await z.getBlogCategories();return f.value=a,a}catch(a){console.error("Error fetching blog categories:",a)}},fetchBlogTags:async()=>{try{const a=await z.getBlogTags();return i.value=a,a}catch(a){console.error("Error fetching blog tags:",a)}},initializeBlogsPage:async()=>{var a,s;try{r.value=!0,n.value=null;const[l,o,h]=await Promise.allSettled([z.getBlogs({per_page:6,with:"media,image,featured_image",include:"featured_image,gallery,media,image",fields:"*"}),z.getFeaturedBlogs(),z.getBlogCategories()]);if(l.status==="fulfilled"){const c=l.value.data.map(D);v.value=c,l.value.meta&&(w.value={currentPage:l.value.meta.current_page,lastPage:l.value.meta.last_page,perPage:l.value.meta.per_page,total:l.value.meta.total})}if(o.status==="fulfilled"){const c=o.value.map(D);y.value=c}h.status==="fulfilled"&&(f.value=h.value)}catch(l){n.value=((s=(a=l.response)==null?void 0:a.data)==null?void 0:s.message)||"Error al cargar los datos de blogs",console.error("Error initializing blogs page:",l)}finally{r.value=!1}},setFilters:a=>{m.value={...m.value,...a}},clearFilters:()=>{m.value={}},clearError:()=>{n.value=null},clearCurrentBlog:()=>{u.value=null},searchBlogs:a=>b.value.filter(s=>s.title.toLowerCase().includes(a.toLowerCase())||s.excerpt.toLowerCase().includes(a.toLowerCase())||s.content.toLowerCase().includes(a.toLowerCase())||s.tags.some(l=>l.toLowerCase().includes(a.toLowerCase())))}}),ae={key:0,class:"px-6 py-4 border-b border-gray-200"},te={key:1,class:"relative"},se={key:2,class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},re=V({__name:"BaseCard",props:{hover:{type:Boolean,default:!0},padding:{default:"md"},shadow:{default:"sm"}},setup(v){const u=v,y=x(()=>{const i="bg-white rounded-xl border border-gray-200 overflow-hidden transform transition-all duration-300",r={none:"",sm:"shadow-sm",md:"shadow-md",lg:"shadow-lg"},n=u.hover?"hover:shadow-xl hover:-translate-y-1 transition-all duration-300":"";return[i,r[u.shadow],n].join(" ")}),f=x(()=>{const i={none:"",sm:"p-4",md:"p-6",lg:"p-8"};return u.padding==="md"?"px-4 py-4 sm:px-6 sm:py-6":i[u.padding]});return(i,r)=>(g(),p("div",{class:H(y.value)},[i.$slots.header?(g(),p("div",ae,[M(i.$slots,"header")])):C("",!0),i.$slots.image?(g(),p("div",te,[M(i.$slots,"image")])):C("",!0),t("div",{class:H(f.value)},[M(i.$slots,"default")],2),i.$slots.footer?(g(),p("div",se,[M(i.$slots,"footer")])):C("",!0)],2))}}),le={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},oe=V({__name:"BaseButton",props:{variant:{default:"primary"},size:{default:"md"},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},tag:{default:"button"}},setup(v){const u=v,y=x(()=>{const f="inline-flex items-center justify-center font-medium rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 min-h-[44px] -webkit-tap-highlight-color: transparent;",i={primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500 disabled:bg-primary-300 active:bg-primary-800",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-primary-500 disabled:bg-gray-100 active:bg-gray-100",outline:"bg-transparent text-primary-600 border border-primary-600 hover:bg-primary-50 focus:ring-primary-500 disabled:text-primary-300 disabled:border-primary-300 active:bg-primary-100",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500 disabled:text-gray-400 active:bg-gray-200",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 disabled:bg-red-300 active:bg-red-800"},r={sm:"px-3 py-2 text-sm min-w-[80px]",md:"px-4 py-2.5 text-sm min-w-[100px]",lg:"px-6 py-3.5 text-base min-w-[120px]"},n=u.disabled||u.loading?"cursor-not-allowed opacity-60":"cursor-pointer";return[f,i[u.variant],r[u.size],n].join(" ")});return(f,i)=>(g(),S(K(f.tag),X({class:y.value,disabled:f.disabled||f.loading},f.$attrs),{default:P(()=>[f.loading?(g(),p("svg",le,i[0]||(i[0]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):C("",!0),M(f.$slots,"default")]),_:3},16,["class","disabled"]))}}),ne={class:"content-overlay"},ie={class:"category-icon"},ce={class:"title-preview"},ue={class:"text-sm font-semibold text-white/90 text-center line-clamp-2"},ge={class:"decorative-dots"},de=V({__name:"BlogImageGenerator",props:{title:{},category:{}},setup(v){const u=v,y=x(()=>{const r=u.title.split("").reduce((m,w)=>(m=(m<<5)-m+w.charCodeAt(0),m&m),0),n=["gradient-blue","gradient-purple","gradient-green","gradient-orange","gradient-pink","gradient-indigo"];return n[Math.abs(r)%n.length]}),f=x(()=>u.title.length>60?u.title.substring(0,60)+"...":u.title),i=x(()=>{var n;const r=((n=u.category)==null?void 0:n.toLowerCase())||"general";return r.includes("tecnolog")||r.includes("tech")?E("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[E("path",{d:"M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"})]):r.includes("inmobiliaria")||r.includes("real estate")||r.includes("propied")?E("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[E("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})]):r.includes("mercado")||r.includes("market")||r.includes("economia")?E("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[E("path",{d:"M7 4V2c0-1.1.9-2 2-2h6c1.1 0 2 .9 2 2v2h4v2H3V4h4zM6 7v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6z"})]):E("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[E("path",{d:"M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"})])});return(r,n)=>(g(),p("div",{class:H(["blog-image-generator",y.value])},[t("div",ne,[t("div",ie,[(g(),S(K(i.value),{class:"w-8 h-8 text-white/80"}))]),t("div",ce,[t("h3",ue,B(f.value),1)]),t("div",ge,[(g(),p(U,null,G(6,m=>t("div",{key:m,class:"dot",style:Y({animationDelay:`${m*.2}s`})},null,4)),64))])])],2))}}),me=J(de,[["__scopeId","data-v-987bab3e"]]),fe={key:0,class:"absolute top-2 left-2 sm:top-3 sm:left-3"},pe={class:"absolute top-2 right-2 sm:top-3 sm:right-3"},ve={class:"inline-flex items-center px-2 py-1 sm:px-2.5 sm:py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 backdrop-blur-sm"},he={key:1,class:"relative bg-gray-100"},be={key:0,class:"absolute top-2 left-2 sm:top-3 sm:left-3"},ye={class:"absolute top-2 right-2 sm:top-3 sm:right-3"},_e={class:"inline-flex items-center px-2 py-1 sm:px-2.5 sm:py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 backdrop-blur-sm"},xe={class:"space-y-2 sm:space-y-3 flex flex-col flex-1 p-1"},we={class:"flex-1"},Be={class:"text-base sm:text-lg font-semibold text-gray-900 line-clamp-2 leading-tight"},Ce={class:"flex items-center mt-1 mb-2"},ke={class:"flex items-center"},ze=["src","alt"],Le={key:1,class:"w-4 h-4 text-gray-500 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},$e={class:"text-sm text-gray-600 truncate"},Ee={class:"text-sm text-gray-500"},Ie={class:"text-sm text-gray-600 line-clamp-2 leading-relaxed"},Pe={key:0,class:"flex items-center mt-2 gap-1 flex-wrap"},De={key:0,class:"text-xs text-gray-500"},Me={class:"flex items-center justify-between text-sm text-gray-600 flex-wrap gap-2"},Fe={class:"flex items-center space-x-4"},Se={key:0,class:"flex items-center space-x-1"},Ve={class:"truncate"},Te={key:1,class:"flex items-center space-x-1"},Re={class:"truncate"},He={class:"text-xs text-right flex-shrink-0"},Ne={class:"pt-3 border-t border-gray-200 mt-auto"},Ae=V({__name:"BlogCard",props:{blog:{}},setup(v){const u=v,y=_(!1),f=_(!1),i=x(()=>{const e=u.blog,d=!!e.featured_image_responsive,b=!!(e.featured_image_url&&e.featured_image_url!=="null"&&e.featured_image_url!=="undefined"&&e.featured_image_url.trim()!==""&&!y.value),I=!!(e.cover_image_url&&e.cover_image_url!=="null"&&e.cover_image_url!=="undefined"||e.cover_image&&e.cover_image!=="null"&&e.cover_image!=="undefined"||e.image&&e.image!=="null"&&e.image!=="undefined"||e.banner&&e.banner!=="null"&&e.banner!=="undefined"||e.cover&&e.cover!=="null"&&e.cover!=="undefined"||e.thumbnail&&e.thumbnail!=="null"&&e.thumbnail!=="undefined");return d||b||I}),r=x(()=>{var b,I;const e=u.blog,d=[e.cover_image_url,(I=(b=e.featured_image_responsive)==null?void 0:b.original)==null?void 0:I.url,e.featured_image_url,e.featured_image,e.cover_image,e.image,e.banner,e.cover,e.thumbnail];for(const $ of d)if($&&$!=="null"&&$!=="undefined"&&$.trim()!=="")return $;return null}),n=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),m=e=>e>=1e6?Math.floor(e/1e6)+"M":e>=1e3?Math.floor(e/1e3)+"K":e.toString(),w=()=>{f.value=!0,y.value=!1},L=e=>{y.value=!0};return(e,d)=>(g(),S(Z(q),{to:`/blog/${e.blog.slug}`,class:"block transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-xl"},{default:P(()=>[T(re,{hover:"",class:"h-full"},{image:P(()=>[i.value?(g(),S(ee,{key:0,src:r.value,alt:e.blog.title,fallback:r.value,"container-class":"relative bg-gray-100","image-class":"w-full h-48 sm:h-52 md:h-56","enable-hover-zoom":!0,loading:"lazy",sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw",onLoad:w,onError:L},{overlay:P(()=>[e.blog.is_featured?(g(),p("div",fe,d[0]||(d[0]=[t("span",{class:"inline-flex items-center px-2 py-1 sm:px-2.5 sm:py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 backdrop-blur-sm"},[t("svg",{class:"w-3 h-3 mr-1",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})]),R(" Destacado ")],-1)]))):C("",!0),t("div",pe,[t("span",ve,B(e.blog.category),1)])]),_:1},8,["src","alt","fallback"])):(g(),p("div",he,[T(me,{title:e.blog.title,category:e.blog.category,class:"w-full h-48 sm:h-52 md:h-56"},null,8,["title","category"]),e.blog.is_featured?(g(),p("div",be,d[1]||(d[1]=[t("span",{class:"inline-flex items-center px-2 py-1 sm:px-2.5 sm:py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 backdrop-blur-sm"},[t("svg",{class:"w-3 h-3 mr-1",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})]),R(" Destacado ")],-1)]))):C("",!0),t("div",ye,[t("span",_e,B(e.blog.category),1)])]))]),default:P(()=>[t("div",xe,[t("div",we,[t("h3",Be,B(e.blog.title),1),t("div",Ce,[t("div",ke,[e.blog.author_avatar?(g(),p("img",{key:0,src:e.blog.author_avatar,alt:e.blog.author_name,class:"w-4 h-4 rounded-full mr-2"},null,8,ze)):(g(),p("svg",Le,d[2]||(d[2]=[t("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},null,-1)]))),t("span",$e,B(e.blog.author_name),1)]),d[3]||(d[3]=t("span",{class:"mx-2 text-gray-400"},"•",-1)),t("span",Ee,B(n(e.blog.published_at)),1)]),t("p",Ie,B(e.blog.excerpt),1),e.blog.tags&&e.blog.tags.length>0?(g(),p("div",Pe,[(g(!0),p(U,null,G(e.blog.tags.slice(0,3),b=>(g(),p("span",{key:b,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700"}," #"+B(b),1))),128)),e.blog.tags.length>3?(g(),p("span",De," +"+B(e.blog.tags.length-3),1)):C("",!0)])):C("",!0)]),t("div",Me,[t("div",Fe,[e.blog.reading_time?(g(),p("div",Se,[d[4]||(d[4]=t("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("polyline",{points:"12,6 12,12 16,14"})],-1)),t("span",Ve,B(e.blog.reading_time)+" min",1)])):C("",!0),e.blog.views_count?(g(),p("div",Te,[d[5]||(d[5]=t("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t("circle",{cx:"12",cy:"12",r:"3"})],-1)),t("span",Re,B(m(e.blog.views_count)),1)])):C("",!0)]),t("div",He,B(e.blog.category),1)]),t("div",Ne,[T(oe,{variant:"outline",size:"md",class:"w-full text-sm sm:text-base"},{default:P(()=>d[6]||(d[6]=[R(" Leer Artículo ",-1)])),_:1,__:[6]})])])]),_:1})]),_:1},8,["to"]))}}),la=J(Ae,[["__scopeId","data-v-ea7565fc"]]);export{la as B,ra as u};
