import{y as A,r as o}from"./index-CIE8Gtp2.js";import{a as f}from"./api-uPx9hDD2.js";const E=A("agents",()=>{const a=o([]),u=o(null),t=o(!1),e=o(null),v=o(0),i=10*60*1e3;return{agents:a,currentAgent:u,loading:t,error:e,fetchAgents:async(g=!1)=>{var l,s;const n=Date.now();if(!g&&a.value.length>0&&n-v.value<i)return Promise.resolve(a.value);t.value=!0,e.value=null;try{return a.value=await f.getAgents(),v.value=n,a.value}catch(r){throw e.value=((s=(l=r.response)==null?void 0:l.data)==null?void 0:s.message)||"Error al cargar agentes",console.error("Error fetching agents:",r),r}finally{t.value=!1}},fetchAgent:async g=>{var n,l,s,r;t.value=!0,e.value=null;try{u.value=await f.getAgent(g)}catch(c){((n=c.response)==null?void 0:n.status)===404?e.value="Agente no encontrado":((l=c.response)==null?void 0:l.status)===500?e.value="Error del servidor al cargar el agente":e.value=((r=(s=c.response)==null?void 0:s.data)==null?void 0:r.message)||"Error al cargar agente",console.error("Error fetching agent:",c),u.value=null}finally{t.value=!1}},clearCurrentAgent:()=>{u.value=null}}});export{E as u};
