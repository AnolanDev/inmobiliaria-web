import{y as j,r as t}from"./index-BkE6U2tp.js";import{a as i}from"./api-Cpf0xzVV.js";const E=j("projects",()=>{const a=t([]),n=t(null),o=t(!1),r=t(null),p=t(0),g=5*60*1e3,f=t({current_page:1,last_page:1,per_page:12,total:0});return{projects:a,currentProject:n,loading:o,error:r,pagination:f,fetchProjects:async(v,u=!1)=>{var l,c;const s=Date.now();if(!u&&a.value.length>0&&s-p.value<g)return Promise.resolve(a.value);o.value=!0,r.value=null;try{const e=await i.getProjects(v);return a.value=e.data,p.value=s,e.meta&&(f.value=e.meta),a.value}catch(e){throw r.value=((c=(l=e.response)==null?void 0:l.data)==null?void 0:c.message)||"Error al cargar proyectos",console.error("Error fetching projects:",e),e}finally{o.value=!1}},fetchProject:async v=>{var u,s,l,c;o.value=!0,r.value=null;try{n.value=await i.getProject(v)}catch(e){((u=e.response)==null?void 0:u.status)===404?r.value="Proyecto no encontrado":((s=e.response)==null?void 0:s.status)===500?r.value="Error del servidor al cargar el proyecto":r.value=((c=(l=e.response)==null?void 0:l.data)==null?void 0:c.message)||"Error al cargar proyecto",console.error("Error fetching project:",e),n.value=null}finally{o.value=!1}},clearCurrentProject:()=>{n.value=null}}});export{E as u};
